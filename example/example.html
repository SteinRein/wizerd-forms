<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>

	<style>

.wizerdform {
	padding: 40px 50px;
	background-color: #ffffff;
	box-shadow: 0 5px 25px -5px rgba(0, 0, 0, 0.1);
}
.wizerdform-hidden-page {
	display: none;
}
.wizerdform-active-page {
	display: block;
}
fieldset.wizerdform-page > legend{
	margin:  0;
	padding: 0;
	font-size: 0;
	border: none;
	visibility: hidden;
}
.wizerdform-button-hidden {
	display: none;
}
.wizerdform-progress {
	margin-top: 1rem;
	width: 0;
	height: 2px;
	background-color: #000;
	transition: width 0.2s ease;
}

.has-error {
	outline: red solid 2px;
}

	</style>

</head>
<body>

	<form class="wizerdform" method="POST" action="example.html">

		<fieldset class="wizerdform-page">
			<label for="input_1">this field is required</label>
			<input type="text" name="input_1" value="" required />
			<input type="text" name="input_1_1" value="" required />
		</fieldset>

		<fieldset class="wizerdform-page">
			<label for="input_2">write test to continue</label>
			<input type="text" name="input_2" required pattern="test" value="" />
		</fieldset>

		<fieldset class="wizerdform-page">
			<label for="input_3">YAIE (yet another input element)</label>
			<input type="text" name="input_3" value="" />
		</fieldset>

	</form>
	
	<script src="../dist/wizerdform.bundle.js"></script>
	<script>
		const myWizerdForm = document.querySelector('.wizerdform');
		const wizerdForm = new WizerdForm( myWizerdForm, {
			submit_text: 'Submit!!!'
		} );
		wizerdForm.init();

		wizerdForm.insertPage(() => { 
			return `<fieldset>
				<label for="input_4">This is fetched</label>
				<input type="text" name="input_4" value="" />
			</fieldset>`; },
			0
		);

		wizerdForm.on('input', (event, data) => {
			console.log(data);
		});

		wizerdForm.on('error', (event, data) => {
			console.log(data);
			console.log(event);
			data.el.reportValidity();
		});

		wizerdForm.on('navigate', (event, data) => {
			const messages = myWizerdForm.parentElement.querySelectorAll('.msg');
			messages.forEach( (msg) => {
				msg.parentElement.removeChild(msg);
			} );
			console.log(data);
		});

		myWizerdForm.addEventListener('submit', (e) => {
			e.preventDefault();
			const submitMsg = document.createElement('div');
			submitMsg.className = 'msg success';
			submitMsg.innerHTML = 'Successfully submitted';
			myWizerdForm.insertBefore( submitMsg, myWizerdForm.firstChild );
		});

	</script>
</body>
</html>